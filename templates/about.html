<!DOCTYPE html>
<html lang="zh">
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NNTL74DB');</script>
  <!-- End Google Tag Manager -->
  <link rel="icon" href="https://img5.uploadhouse.com/fileuploads/31937/319376154887c9e20b063d9725d84b4b64b8a18d.png" type="image/png">
  <link rel="shortcut icon" href="https://img5.uploadhouse.com/fileuploads/31937/319376154887c9e20b063d9725d84b4b64b8a18d.png" type="image/png">
  <link rel="apple-touch-icon" href="https://img5.uploadhouse.com/fileuploads/31937/319376154887c9e20b063d9725d84b4b64b8a18d.png">  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>關於我 | Angelo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    body { background-color: #FAFAFA; color: #3E2723; font-family: 'Lora', serif; }
    .navbar { background: rgba(250, 250, 250, 0.9); box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05); }
    .hero { background: url('https://images.unsplash.com/photo-1555066931-bf19f8fd1085') center/cover no-repeat; }
    .card { background: #FFFFFF; box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1); border-radius: 12px; }
    .btn { border: 2px solid #3E2723; color: #3E2723; transition: all 0.3s ease; }
    .btn:hover { background: #3E2723; color: white; }
    .progress-bar {
        height: 8px;
        border-radius: 4px;
        background: #f2f2f2;
        margin-bottom: 16px;
        overflow: hidden;
      }
      .progress {
        height: 100%;
        background: linear-gradient(90deg, #8D6E63 0%, #5D4037 100%);
        border-radius: 4px;
      }
      .hobby-card {
        overflow: hidden;
        transition: transform 0.3s ease;
      }
      .hobby-card:hover {
        transform: translateY(-5px);
      }
      .skill-cloud {
        position: relative;
        padding: 20px 0;
      }
      .skill-categories {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
      }
      .skill-category {
        position: relative;
      }
      .main-skill {
        background: #f7f0e6;
        color: #5D4037;
        padding: 12px 20px;
        border-radius: 30px;
        font-weight: bold;
        font-size: 18px;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
      }
      .main-skill:hover {
        background: #8D6E63;
        color: white;
        transform: translateY(-5px);
        box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
      }
      .sub-skills {
        position: absolute;
        display: none;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
        background: white;
        border-radius: 10px;
        padding: 10px;
        box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
        width: 250px;
        top: 100%;
        left: 50%;
        transform: translateX(-50%);
        margin-top: 10px;
        z-index: 10;
      }
      .sub-skills:before {
        content: '';
        position: absolute;
        top: -10px;
        left: 50%;
        transform: translateX(-50%);
        border-width: 0 10px 10px 10px;
        border-style: solid;
        border-color: transparent transparent white transparent;
      }
      .sub-skill {
        background: #f9f5f2;
        color: #5D4037;
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 14px;
      }
      .sub-skill small {
        color: #8D6E63;
        font-weight: bold;
      }
      .carousel-item {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 0.8s ease;
        display: flex;
        flex-direction: column;
        background-size: cover;
        background-position: center;
        color: white;
        padding: 30px;
      }

      .carousel-item.active {
        opacity: 1;
      }

      .carousel-item:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.7) 100%);
        z-index: 0;
      }

      .carousel-content {
        position: relative;
        z-index: 1;
        margin-top: auto;
      }

      .carousel-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.5);
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .carousel-dot.active {
        background-color: white;
        transform: scale(1.2);
      }
  </style>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NNTL74DB"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <!-- 導航欄 -->
  <!-- 替換導航欄部分 -->
  <section class="navbar w-full fixed top-0 left-0 z-50 py-4 px-6">
    <div class="container mx-auto flex items-center justify-between">
      <a href="about.html" class="text-2xl font-bold">Angeloange</a>
      
      <!-- 桌面版導航 - 大屏幕顯示 -->
      <nav class="hidden lg:flex space-x-6">
        <a href="about.html" class="hover:text-gray-500">關於我</a>
        <a href="portfolio.html" class="hover:text-gray-500">作品集</a>
        <a href="blog.html" class="hover:text-gray-500">部落格</a>
        <a href="contactme.html" class="hover:text-gray-500">聯絡我</a>
        {% if user_email %}
          <span class="ml-4">Hi, {{ user_email }}</span>
          <button id="logout-btn" class="ml-2 btn px-4 py-1 rounded-lg" onclick="logoutUser()">登出</button>
        {% else %}
          <button id="open-auth-modal" class="ml-4 btn px-4 py-1 rounded-lg">登入/註冊</button>
        {% endif %}
      </nav>
      
      <!-- 漢堡菜單按鈕 - 只在小屏幕顯示 -->
      <button id="mobile-menu-button" class="lg:hidden text-3xl">
        ☰
      </button>
    </div>
    
    <!-- 移動端導航菜單 - 默認隱藏 -->
    <div id="mobile-menu" class="hidden w-full bg-white shadow-lg absolute left-0 top-full mt-1 py-4 lg:hidden">
      <div class="container mx-auto px-6">
        <a href="about.html" class="block py-2 hover:text-amber-800">關於我</a>
        <a href="portfolio.html" class="block py-2 hover:text-amber-800">作品集</a>
        <a href="blog.html" class="block py-2 hover:text-amber-800">部落格</a>
        <a href="contactme.html" class="block py-2 hover:text-amber-800">聯絡我</a>
      </div>
    </div>
  </section>

  <!-- 主視覺區域 -->
  <section class="hero h-96 flex items-center justify-center relative">
    <div class="absolute inset-0 bg-black bg-opacity-40"></div>
    <div class="relative z-10 text-center text-white">
      <h1 class="text-5xl font-bold">關於我</h1>
      <p class="mt-4 text-lg">探索我的技術旅程與創作熱情</p>
    </div>
  </section>

  <!-- 個人介紹 -->
  <section class="container mx-auto py-16 px-6 max-w-4xl">
    <div class="card p-8">
      <!-- 個人資訊區域 -->
      <div class="flex flex-col md:flex-row gap-8 items-center md:items-start">
        <!-- 個人照片 -->
        <div class="w-48 h-48 rounded-full overflow-hidden flex-shrink-0 border-4 border-amber-800">
          <img src="https://img8.uploadhouse.com/fileuploads/31936/31936778eb4b70130f3289122781a71f94414143.jpg" alt="Angelo照片" class="w-full h-full object-cover">
        </div>
        
        <!-- 個人簡介 -->
        <div>
          <h2 class="text-3xl font-bold">Hi, I'm Angelo</h2>
          <h3 class="text-xl text-amber-800 mt-2">我希望把自己的人生打造成很多人都可以受益的正和遊戲</h3>
          <h3 class="text-xl text-amber-800 mt-2">Then said "Happy we can!"</h3>
          <p class="mt-6 text-gray-700">
            大學時期的我，在課餘時間擔任過吉他社團老師、咖啡師、以及軟體新創業務。除了喜歡把雜亂的知識收斂成系統後與他人分享，更在實習過程中收穫了很好的簡報/提案/思考能力。而拜於學校重視數據驅動的趨勢，我也培養了不錯的數理能力
            ，也從中發現了用程式解決現實問題的樂趣，因此點燃了我對技術的熱情。除了本科的數理統計/統計分析，更跨系修習了許多程式相關的課程，以展現學習積極/以及學習能力，詳情可以參考<a href="https://drive.google.com/file/d/1rKGg4z_ZxPkvfL82YNfv-tEenXQ0Zn7b/view?usp=share_link" style="color:blue;" target="_blank">成績單超連結</a>，也在畢業前與畢業後分別並參與了ccClub/職訓局這兩個非常扎實的coding bootcamp。
          </p>
          <p class="mt-4 text-gray-700">
            積極求職的現在，深知轉職軟體工程是一條艱辛、需要持續學習的路程，我積極探索各種技術領域，持續打造能夠真正解決問題的作品集。
          </p>
          
          <div class="flex gap-4 mt-6">
            <a href="portfolio.html" class="btn px-5 py-2 rounded-lg flex items中心">
              <i class="fas fa-briefcase mr-2"></i> 查看作品集
            </a>
            <a href="contactme.html" class="btn px-5 py-2 rounded-lg flex items中心">
              <i class="fas fa-envelope mr-2"></i> 與我聯繫
            </a>
          </div>
        </div>
      </div>

      <!-- 技能樹區域 - 已移至個人介紹卡片內 -->
      <div class="mt-12">
        <h2 class="text-3xl font-bold mb-6" style="text-align: center;">我的技能樹</h2>
        
        <div class="skill-cloud">
          <div class="skill-categories">
            <!-- 前端開發 -->
            <div class="skill-category" onmouseenter="showSkills('frontend')" onmouseleave="hideSkills()">
              <div class="main-skill">
                <i class="fas fa-code text-amber-800 mr-2"></i>
                前端開發
              </div>
              <div class="sub-skills" id="frontend">
                <span class="sub-skill">HTML/CSS </span>
                <span class="sub-skill">JavaScript </span>
                <span class="sub-skill">TailwindCSS </span>
                <span class="sub-skill">響應式設計</span>
              </div>
            </div>
            
            <!-- 後端開發 -->
            <div class="skill-category" onmouseenter="showSkills('backend')" onmouseleave="hideSkills()">
              <div class="main-skill">
                <i class="fas fa-server text-amber-800 mr-2"></i>
                後端開發
              </div>
              <div class="sub-skills" id="backend">
                <span class="sub-skill">Python </span>
                <span class="sub-skill">Flask </span>
                <span class="sub-skill">MongoDB/MySQL </span>
                <span class="sub-skill">RESTful API</span>
                <span class="sub-skill">EventLet</span>
              </div>
            </div>
            
            <!-- 業務能力 -->
            <div class="skill-category" onmouseenter="showSkills('business')" onmouseleave="hideSkills()">
              <div class="main-skill">
                <i class="fas fa-handshake text-amber-800 mr-2"></i>
                業務能力
              </div>
              <div class="sub-skills" id="business">
                <span class="sub-skill">提案技巧</span>
                <span class="sub-skill">簡報製作</span>
                <span class="sub-skill">商業/競品分析</span>
                <span class="sub-skill">陌生開發</span>
                <span class="sub-skill">客戶維護</span>
              </div>
            </div>
            
            <!-- 數據分析 -->
            <div class="skill-category" onmouseenter="showSkills('data')" onmouseleave="hideSkills()">
              <div class="main-skill">
                <i class="fas fa-chart-line text-amber-800 mr-2"></i>
                數據分析
              </div>
              <div class="sub-skills" id="data">
                <span class="sub-skill">統計分析</span>
                <span class="sub-skill">資料視覺化</span>
                <span class="sub-skill">機器學習</span>
                <span class="sub-skill">數據解讀</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- 作品集預覽 -->
  <section class="container mx-auto py-8 px-6 max-w-4xl">
    <div class="card p-8">
      <h2 class="text-3xl font-bold mb-8">精選作品</h2>
      
      <!-- 輪播容器 -->
      <div class="relative overflow-hidden rounded-lg" style="height: 320px;">
        <!-- 輪播內容區域 -->
        <div id="carousel-container" class="w-full h-full">
          <!-- 輪播項目由JavaScript動態生成 -->
          <div class="text中心 py-16">
            <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-amber-800 mx-auto"></div>
            <p class="mt-4 text-gray-600">載入中...</p>
          </div>
        </div>
        
        <!-- 輪播控制按鈕 -->
        <div class="absolute bottom-4 left-0 right-0 flex justify-center space-x-2" id="carousel-dots">
          <!-- 輪播指示點由JavaScript動態生成 -->
        </div>
      </div>
      
      <!-- 查看全部按鈕 -->
      <div class="text中心 mt-6">
        <a href="portfolio.html" target="_blank" class="btn px-6 py-2 rounded-lg inline-flex items中心">
          <span>查看全部作品</span>
          <i class="fas fa-arrow-right ml-2"></i>
        </a>
      </div>
    </div>
  </section>

  <!-- 最新發表文章區塊 -->
  <section class="container mx-auto py-8 px-6 max-w-4xl">
    <div class="card p-8">
      <h2 class="text-3xl font-bold mb-8">最新發表文章</h2>
      <div class="flex flex-col md:flex-row gap-8">
        <!-- 左側：最新一篇（加上小框） -->
        <div id="latest-blog-main" class="flex-1 min-w-0">
          <!-- JS 動態插入 -->
        </div>
        <!-- 右側：過去三篇（加上小標題） -->
        <div class="flex flex-col gap-4 w-full md:w-2/5">
          <h3 class="text-lg font-semibold mb-2 text-amber-800">其他文章</h3>
          <div id="latest-blog-list"></div>
        </div>
      </div>
      <!-- 查看所有文章按鈕 -->
      <div class="mt-8 text中心">
        <a href="/blog.html" class="btn px-6 py-2 rounded-lg inline-flex items中心">
          <span>查看所有文章</span>
          <i class="fas fa-arrow-right ml-2"></i>
        </a>
      </div>
    </div>
  </section>

  <!-- 願景與目標 -->
  <section class="container mx-auto py-8 px-6 max-w-4xl mb-12">
    <div class="card p-8">
      <h2 class="text-3xl font-bold mb-6">我的願景</h2>
      
      <p class="text-gray-700 mb-4">
        我希望通過這個網站分享我的學習旅程，並為其他有相似興趣的人提供實用的資源和工具。
      </p>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8">
        <div class="bg-amber-50 p-6 rounded-lg">
          <h3 class="text-xl font-bold mb-3 flex items中心">
            <i class="fas fa-rocket mr-2 text-amber-800"></i> Side Project 平台
          </h3>
          <p>打造一個開放的平台，提供各種實用的小工具和解決方案，幫助有需要的人解決實際問題。</p>
        </div>
        
        <div class="bg-amber-50 p-6 rounded-lg">
          <h3 class="text-xl font-bold mb-3 flex items中心">
            <i class="fas fa-newspaper mr-2 text-amber-800"></i> 電子報
          </h3>
          <p>分享學習心得、技術見解和有價值的資源，建立一個持續學習和成長的社群。</p>
          
          <div class="mt-4">
            <form id="newsletter-form" class="flex flex-col gap-2">
              <div class="flex gap-2">
                <input type="email" id="newsletter-email" placeholder="您的電子郵件" 
                       class="px-3 py-2 border rounded-lg flex-grow" required>
                <button type="submit" id="subscribe-btn" 
                        class="btn px-4 py-2 rounded-lg">訂閱</button>
              </div>
              <div id="subscription-status" class="mt-2 text-sm hidden"></div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>




  <!-- 興趣愛好 -->
  <section class="container mx-auto py-8 px-6 max-w-4xl">
    <div class="card p-8">
      <h2 class="text-3xl font-bold mb-8">工作之外的我</h2>
      <p class="text-xl text-gray-700 mb-6">平時也積極培養其他興趣愛好，相信休息是為了走更長遠的路，也把自律正直視為值得用一生貫徹的價值觀。<br>未來也計畫分享相關題材的文章，來幫助有興趣但卻不知道如何開始的朋友們，<br>Happy we can!</p>      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <!-- 跑步 -->
      <div class="hobby-card rounded-lg overflow-hidden">
        <div class="h-40 overflow-hidden">
          <img src="https://img6.uploadhouse.com/fileuploads/31936/31936866e532037a3fc020e252756014fe9fbebf.jpg" alt="跑步" class="w-full h-full object-cover">
        </div>
        <div class="p-3 text中心 bg-amber-50">
          <h3 class="font-bold">跑步</h3>
        </div>
      </div>


      <!-- 咖啡 -->
      <div class="hobby-card rounded-lg overflow-hidden">
        <div class="h-40 overflow-hidden">
          <img src="https://img2.uploadhouse.com/fileuploads/31936/3193686247bb0dd7f71643ea2b64c918032da91b.jpg" alt="咖啡" class="w-full h-full object-cover">
        </div>
        <div class="p-3 text中心 bg-amber-50">
          <h3 class="font-bold">咖啡</h3>
        </div>
      </div>
        
      <!-- 健身 -->
      <div class="hobby-card rounded-lg overflow-hidden">
        <div class="h-40 overflow-hidden">
          <img src="https://img8.uploadhouse.com/fileuploads/31937/31937298023d322cb396e779e18f49439d96f45e.png" alt="健身" class="w-full h-full object-cover" >
        </div>
        <div class="p-3 text中心 bg-amber-50">
          <h3 class="font-bold">健身</h3>
        </div>
      </div>
      


      
      <!-- 彈吉他 -->
      <div class="hobby-card rounded-lg overflow-hidden">
        <div class="h-40 overflow-hidden">
          <img src="https://img3.uploadhouse.com/fileuploads/31936/31936863619a5b492ca7b371d3cec2170e2a415e.jpg" alt="彈吉他" class="w-full h-full object-cover">
        </div>
        <div class="p-3 text中心 bg-amber-50">
          <h3 class="font-bold">音樂</h3>
        </div>
      </div>
      </div>
    </div>
  </section>
  

  <!-- 頁腳 -->
  <footer class="bg-gray-100 text-gray-800 py-6 mt-12">
    <div class="container mx-auto flex flex-col items中心 space-y-4">
      <div class="flex space-x-6">
        <a href="https://www.instagram.com/angelo__1016/" target="_blanker" class="hover:text-gray-500">IG</a>
        
        <a href="https://github.com/angeloange?tab=repositories" target="_blanker" class="hover:text-gray-500">GitHub</a>
        <a href="https://www.youtube.com/@Happywecan" target="_blanker"  class="hover:text-gray-500">YouTube</a>
      </div>
      <p>&copy; 2025 Angeloange. All rights reserved.</p>
    </div>
  </footer>
  <script>
    function showSkills(skillId) {
      // 先隱藏所有的子技能列表
      document.querySelectorAll('.sub-skills').forEach(function(el) {
        el.style.display = 'none';
      });
      
      // 顯示被懸停的技能的子技能列表
      document.getElementById(skillId).style.display = 'flex';
    }
    
    function hideSkills() {
      // 隱藏所有子技能列表
      document.querySelectorAll('.sub-skills').forEach(function(el) {
        el.style.display = 'none';
      });
    }
    
    // 點擊空白處隱藏所有子技能列表
    document.addEventListener('click', function(e) {
      if (!e.target.closest('.skill-category')) {
        hideSkills();
      }
    });
    
    // 防止子技能點擊事件冒泡
    document.querySelectorAll('.sub-skills').forEach(function(el) {
      el.addEventListener('click', function(e) {
        e.stopPropagation();
      });
    });
    // 輪播功能
  async function loadCarouselItems() {
    try {
      // 從API獲取作品資料
      const response = await fetch('/api/portfolio');
      const portfolios = await response.json();
      
      // 只取前3個作品
      const featuredItems = portfolios;
      
      if (featuredItems.length === 0) {
        document.getElementById('carousel-container').innerHTML = 
          '<p class="text中心">暫無作品</p>';
        return;
      }
      
      // 生成輪播內容
      const carouselContainer = document.getElementById('carousel-container');
      const dotsContainer = document.getElementById('carousel-dots');
      
      carouselContainer.innerHTML = '';
      dotsContainer.innerHTML = '';
      
      featuredItems.forEach((item, index) => {
        // 創建輪播項
        const carouselItem = document.createElement('div');
        carouselItem.className = `carousel-item ${index === 0 ? 'active' : ''}`;
        carouselItem.style.backgroundImage = `url(${item.image_url || 'https://via.placeholder.com/800x400?text=No+Image'})`;
        
        carouselItem.innerHTML = `
          <div class="carousel-content">
            <h3 class="text-2xl font-bold">${item.title}</h3>
            <p class="mt-2 line-clamp-2">${item.description}</p>
            <a href="/portfolio/${item._id}" target="_blank" class="mt-4 bg-white text-amber-800 hover:bg-amber-800 hover:text-white px-4 py-2 rounded-lg inline-block transition duration-300">查看更多</a>
          </div>
        `;
        
        carouselContainer.appendChild(carouselItem);
        
        // 創建輪播指示點
        const dot = document.createElement('div');
        dot.className = `carousel-dot ${index === 0 ? 'active' : ''}`;
        dot.addEventListener('click', () => showSlide(index));
        dotsContainer.appendChild(dot);
      });
      
      // 設置自動輪播
      startCarousel(featuredItems.length);
      
    } catch (error) {
      console.error('載入作品失敗', error);
      document.getElementById('carousel-container').innerHTML = 
        '<p class="text中心 text-red-500">載入作品失敗，請稍後再試</p>';
    }
  }

  let carouselInterval;
  let currentSlide = 0;

  function startCarousel(totalSlides) {
    // 自動輪播，每5秒切換一次
    carouselInterval = setInterval(() => {
      currentSlide = (currentSlide + 1) % totalSlides;
      showSlide(currentSlide);
    }, 5000);
  }

  function showSlide(index) {
    // 切換輪播項
    const items = document.querySelectorAll('.carousel-item');
    const dots = document.querySelectorAll('.carousel-dot');
    
    items.forEach((item, i) => {
      item.classList.toggle('active', i === index);
    });
    
    dots.forEach((dot, i) => {
      dot.classList.toggle('active', i === index);
    });
    
    currentSlide = index;
    
    // 重置自動輪播計時器
    clearInterval(carouselInterval);
    startCarousel(items.length);
  }

  // 頁面載入後執行
  document.addEventListener('DOMContentLoaded', function() {
    // 載入現有的技能樹功能
    document.querySelectorAll('.sub-skills').forEach(function(el) {
      el.addEventListener('click', function(e) {
        e.stopPropagation();
      });
    });
    
    // 載入輪播項目
    loadCarouselItems();
  });

  // 電子報訂閱功能
  document.addEventListener('DOMContentLoaded', function() {
    const newsletterForm = document.getElementById('newsletter-form');
    const emailInput = document.getElementById('newsletter-email');
    const subscribeBtn = document.getElementById('subscribe-btn');
    const statusElement = document.getElementById('subscription-status');
    
    if (newsletterForm) {
      newsletterForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // 顯示載入狀態
        subscribeBtn.disabled = true;
        subscribeBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 處理中...';
        statusElement.classList.add('hidden');
        
        const email = emailInput.value.trim();
        
        try {
          // 發送 API 請求
          const response = await fetch('/api/subscribe', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ email }),
          });
          
          const data = await response.json();
          
          // 顯示結果
          statusElement.classList.remove('hidden');
          if (response.ok) {
            // 成功
            statusElement.textContent = data.message;
            statusElement.className = 'mt-2 text-sm text-green-600';
            // 清空輸入
            emailInput.value = '';
          } else {
            // 錯誤
            statusElement.textContent = data.message;
            statusElement.className = 'mt-2 text-sm text-red-600';
          }
        } catch (error) {
          // 網路錯誤或其他異常
          console.error('訂閱請求失敗:', error);
          statusElement.classList.remove('hidden');
          statusElement.textContent = '連接伺服器時出錯，請稍後再試';
          statusElement.className = 'mt-2 text-sm text-red-600';
        } finally {
          // 恢復按鈕狀態
          subscribeBtn.disabled = false;
          subscribeBtn.innerHTML = '訂閱';
        }
      });
    }
  });

  // 最新發表文章區塊載入
  async function loadLatestBlogs() {
    try {
      const response = await fetch('/api/blog');
      if (!response.ok) throw new Error('載入部落格失敗');
      const posts = await response.json();
      if (!Array.isArray(posts) || posts.length === 0) {
        document.getElementById('latest-blog-main').innerHTML = '<div class="bg-amber-50 rounded-lg p-6 text-gray-500">目前尚無文章</div>';
        document.getElementById('latest-blog-list').innerHTML = '';
        return;
      }
      // 最新一篇
      const latest = posts[0];
      const tagsHtml = latest.tags && latest.tags.length > 0 ? `<div class='mb-2'>${latest.tags.map(tag => `<span class='bg-amber-50 text-amber-800 text-xs px-2 py-1 rounded-full mr-2'>${tag}</span>`).join('')}</div>` : '';
      document.getElementById('latest-blog-main').innerHTML = `
        <div class="bg-amber-50 rounded-lg p-6 shadow flex flex-col h-full">
          <a href="/blog/${latest._id}" class="block group flex-1">
            <div class="rounded-lg overflow-hidden mb-4 h-48 md:h-64 relative">
              <img src="${latest.cover_image || 'https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?q=80&w=800'}" alt="${latest.title}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
              <div class="absolute inset-0 bg-gradient-to-b from-black/20 to-black/60"></div>
            </div>
            ${tagsHtml}
            <h3 class="text-2xl font-bold mb-2">${latest.title}</h3>
            ${latest.subtitle ? `<p class="text-lg text-gray-700 mb-2 line-clamp-2">${latest.subtitle}</p>` : ''}
            <p class="text-sm text-gray-500">${latest.published_at ? new Date(latest.published_at).toLocaleDateString('zh-TW') : ''}</p>
          </a>
        </div>
      `;
      // 右側三篇（不含最新一篇）
      const others = posts.slice(1, 4);
      document.getElementById('latest-blog-list').innerHTML = others.map(post => {
        const tagsHtml = post.tags && post.tags.length > 0 ? `<div class='mb-1'>${post.tags.map(tag => `<span class='bg-amber-50 text-amber-800 text-xs px-2 py-1 rounded-full mr-2'>${tag}</span>`).join('')}</div>` : '';
        return `
          <a href="/blog/${post._id}" class="block p-4 rounded-lg hover:bg-amber-100 transition bg-white shadow">
            ${tagsHtml}
            <h4 class="text-lg font-semibold mb-1">${post.title}</h4>
            ${post.subtitle ? `<p class="text-gray-600 text-sm line-clamp-1">${post.subtitle}</p>` : ''}
            <p class="text-xs text-gray-400 mt-1">${post.published_at ? new Date(post.published_at).toLocaleDateString('zh-TW') : ''}</p>
          </a>
        `;
      }).join('');
    } catch (e) {
      document.getElementById('latest-blog-main').innerHTML = '<div class="bg-amber-50 rounded-lg p-6 text-red-500">載入最新文章失敗</div>';
      document.getElementById('latest-blog-list').innerHTML = '';
    }
  }
  document.addEventListener('DOMContentLoaded', function() {
    // ...existing code...
    loadLatestBlogs();
  });
  </script>
  <!-- 在 </body> 標籤前添加這段腳本 -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const menuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');
      
      if(menuButton && mobileMenu) {
        menuButton.addEventListener('click', function() {
          // 切換菜單顯示狀態
          if(mobileMenu.classList.contains('hidden')) {
            mobileMenu.classList.remove('hidden');
          } else {
            mobileMenu.classList.add('hidden');
          }
        });
        
        // 點擊頁面其他區域時關閉菜單
        document.addEventListener('click', function(e) {
          if(!menuButton.contains(e.target) && !mobileMenu.contains(e.target)) {
            mobileMenu.classList.add('hidden');
          }
        });
      }
    });
  </script>
  <!-- 在 </body> 結尾前加會員彈窗元件 -->
  <div id="auth-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 hidden">
    <div class="bg-white rounded-lg shadow-lg w-full max-w-sm p-6 relative">
      <button id="close-auth-modal" class="absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl">&times;</button>
      <div id="auth-tabs" class="flex mb-6 border-b">
        <button class="flex-1 py-2 text-center font-bold" id="tab-login">登入</button>
        <button class="flex-1 py-2 text-center font-bold" id="tab-register">註冊</button>
      </div>
      <form id="login-form" class="space-y-4">
        <input type="email" id="login-email" class="w-full border rounded px-3 py-2" placeholder="Email" required>
        <input type="password" id="login-password" class="w-full border rounded px-3 py-2" placeholder="密碼" required>
        <button type="submit" class="btn w-full py-2">登入</button>
        <div class="text-right mt-2">
          <a href="#" id="show-forgot" class="text-sm text-blue-600 hover:underline">忘記密碼？</a>
        </div>
        <div id="login-msg" class="text-sm text-red-600"></div>
      </form>
      <form id="register-form" class="space-y-4 hidden">
        <input type="email" id="register-email" class="w-full border rounded px-3 py-2" placeholder="Email" required>
        <input type="password" id="register-password" class="w-full border rounded px-3 py-2" placeholder="密碼" required>
        <input type="text" id="register-nickname" class="w-full border rounded px-3 py-2" placeholder="暱稱 (可選)">
        <button type="submit" class="btn w-full py-2">註冊</button>
        <div id="register-msg" class="text-sm text-red-600"></div>
      </form>
      <form id="forgot-form" class="space-y-4 hidden">
        <input type="email" id="forgot-email" class="w-full border rounded px-3 py-2" placeholder="請輸入註冊 Email" required>
        <button type="submit" class="btn w-full py-2">寄送重設密碼信</button>
        <div id="forgot-msg" class="text-sm text-red-600"></div>
        <div class="text-right mt-2">
          <a href="#" id="back-to-login" class="text-sm text-blue-600 hover:underline">返回登入</a>
        </div>
      </form>
    </div>
  </div>
  <script>
    // 彈窗開關
    document.getElementById('open-auth-modal').onclick = function() {
      document.getElementById('auth-modal').classList.remove('hidden');
      showTab('login');
    };
    document.getElementById('close-auth-modal').onclick = function() {
      document.getElementById('auth-modal').classList.add('hidden');
    };
    // 切換分頁
    document.getElementById('tab-login').onclick = function() { showTab('login'); };
    document.getElementById('tab-register').onclick = function() { showTab('register'); };
    function showTab(tab) {
      document.getElementById('login-form').classList.toggle('hidden', tab !== 'login');
      document.getElementById('register-form').classList.toggle('hidden', tab !== 'register');
      document.getElementById('forgot-form').classList.add('hidden');
      document.getElementById('tab-login').classList.toggle('border-b-2', tab === 'login');
      document.getElementById('tab-register').classList.toggle('border-b-2', tab === 'register');
    }
    // 忘記密碼切換
    document.getElementById('show-forgot').onclick = function(e) {
      e.preventDefault();
      document.getElementById('login-form').classList.add('hidden');
      document.getElementById('register-form').classList.add('hidden');
      document.getElementById('forgot-form').classList.remove('hidden');
    };
    document.getElementById('back-to-login').onclick = function(e) {
      e.preventDefault();
      showTab('login');
    };
    // 登入表單提交
    document.getElementById('login-form').onsubmit = async function(e) {
      e.preventDefault();
      const email = document.getElementById('login-email').value.trim();
      const password = document.getElementById('login-password').value;
      const msg = document.getElementById('login-msg');
      msg.textContent = '';
      const res = await fetch('/api/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email, password })
      });
      const data = await res.json();
      if (data.success) {
        msg.style.color = 'green';
        msg.textContent = '登入成功！';
        setTimeout(() => location.reload(), 800);
      } else {
        msg.style.color = 'red';
        msg.textContent = data.message || '登入失敗';
      }
    };
    // 註冊表單提交
    document.getElementById('register-form').onsubmit = async function(e) {
      e.preventDefault();
      const email = document.getElementById('register-email').value.trim();
      const password = document.getElementById('register-password').value;
      const nickname = document.getElementById('register-nickname').value.trim();
      const msg = document.getElementById('register-msg');
      msg.textContent = '';
      const res = await fetch('/api/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email, password, nickname })
      });
      const data = await res.json();
      if (data.success) {
        msg.style.color = 'green';
        msg.textContent = '註冊成功，請登入';
        setTimeout(() => showTab('login'), 1000);
      } else {
        msg.style.color = 'red';
        msg.textContent = data.message || '註冊失敗';
      }
    };
    // 忘記密碼表單提交
    document.getElementById('forgot-form').onsubmit = async function(e) {
      e.preventDefault();
      const email = document.getElementById('forgot-email').value.trim();
      const msg = document.getElementById('forgot-msg');
      msg.textContent = '';
      const res = await fetch('/api/request_reset_password', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email })
      });
      const data = await res.json();
      if (data.success) {
        msg.style.color = 'green';
        msg.textContent = '已寄送重設密碼信，請檢查信箱';
      } else {
        msg.style.color = 'red';
        msg.textContent = data.message || '寄送失敗';
      }
    };
    // 登出按鈕
    document.addEventListener('DOMContentLoaded', function() {
      var logoutBtn = document.getElementById('logout-btn');
      if (logoutBtn) {
        logoutBtn.onclick = async function() {
          await fetch('/api/logout', { method: 'POST' });
          location.reload();
        };
      }
    });
    function logoutUser() {
      fetch('/api/logout', { method: 'POST' })
        .then(() => {
          location.reload();
        });
    }
  </script>
</body>
</html>